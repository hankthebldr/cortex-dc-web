# Cortex DC Web - Production Environment Configuration
# Copy this file to .env.production and fill in your production values

#============================================
# IMPORTANT: Production Security
#============================================
# - Use strong, unique passwords and secrets
# - Enable HTTPS/SSL for all services
# - Use secure, encrypted connections for databases
# - Regularly rotate credentials
# - Never commit .env.production to version control
#============================================

#============================================
# Deployment Mode
#============================================
DEPLOYMENT_MODE=self-hosted
NEXT_PUBLIC_DEPLOYMENT_MODE=self-hosted

#============================================
# Application Configuration
#============================================
NODE_ENV=production
NEXT_PUBLIC_APP_NAME=Cortex DC
NEXT_PUBLIC_APP_URL=https://cortex.yourdomain.com
NEXT_PUBLIC_ENVIRONMENT=production

#============================================
# Backend API Configuration
#============================================
NEXT_PUBLIC_API_URL=https://api.cortex.yourdomain.com
NEXT_PUBLIC_API_TIMEOUT=30000
NEXT_PUBLIC_USE_BACKEND_API=true

#============================================
# Authentication Configuration (Keycloak)
#============================================
NEXT_PUBLIC_KEYCLOAK_URL=https://auth.cortex.yourdomain.com
NEXT_PUBLIC_KEYCLOAK_REALM=cortex
NEXT_PUBLIC_KEYCLOAK_CLIENT_ID=cortex-web

# Backend Keycloak credentials
KEYCLOAK_CLIENT_SECRET=REPLACE_WITH_SECURE_CLIENT_SECRET
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=REPLACE_WITH_SECURE_ADMIN_PASSWORD

#============================================
# Database Configuration (PostgreSQL)
#============================================
POSTGRES_USER=cortex
POSTGRES_PASSWORD=REPLACE_WITH_SECURE_DB_PASSWORD
POSTGRES_DB=cortex
DATABASE_URL=postgresql://cortex:REPLACE_WITH_SECURE_DB_PASSWORD@postgres:5432/cortex

#============================================
# Storage Configuration (MinIO/S3)
#============================================
STORAGE_MODE=minio
NEXT_PUBLIC_STORAGE_MODE=minio
NEXT_PUBLIC_MINIO_ENDPOINT=https://storage.cortex.yourdomain.com
NEXT_PUBLIC_MINIO_BUCKET=cortex-storage

# Backend MinIO configuration
MINIO_ENDPOINT=https://storage.cortex.yourdomain.com
MINIO_PORT=443
MINIO_BUCKET=cortex-storage
MINIO_ROOT_USER=REPLACE_WITH_MINIO_USER
MINIO_ROOT_PASSWORD=REPLACE_WITH_SECURE_MINIO_PASSWORD
MINIO_USE_SSL=true
MINIO_ACCESS_KEY=REPLACE_WITH_MINIO_USER
MINIO_SECRET_KEY=REPLACE_WITH_SECURE_MINIO_PASSWORD

#============================================
# Caching & Message Queue
#============================================
REDIS_URL=redis://:REPLACE_WITH_SECURE_REDIS_PASSWORD@redis:6379
REDIS_PASSWORD=REPLACE_WITH_SECURE_REDIS_PASSWORD

NATS_URL=nats://nats:4222

#============================================
# Security (CRITICAL - MUST CHANGE)
#============================================
# Generate secure random strings (minimum 32 characters each)
# Use: openssl rand -base64 32
JWT_SECRET=REPLACE_WITH_SECURE_JWT_SECRET_MIN_32_CHARS
SESSION_SECRET=REPLACE_WITH_SECURE_SESSION_SECRET_MIN_32_CHARS

# CORS allowed origins (comma-separated, no wildcards in production)
CORS_ALLOWED_ORIGINS=https://cortex.yourdomain.com,https://api.cortex.yourdomain.com

#============================================
# AI Configuration
#============================================
GEMINI_API_KEY=REPLACE_WITH_YOUR_GEMINI_API_KEY
NEXT_PUBLIC_GEMINI_API_KEY=REPLACE_WITH_YOUR_GEMINI_API_KEY
AI_MODEL=gemini-2.5-flash

# OpenAI (optional)
# OPENAI_API_KEY=REPLACE_WITH_YOUR_OPENAI_API_KEY

#============================================
# Feature Flags
#============================================
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_AI_FEATURES=true
NEXT_PUBLIC_ENABLE_POV_MANAGEMENT=true
NEXT_PUBLIC_ENABLE_TRR_WORKFLOWS=true
NEXT_PUBLIC_ENABLE_CONTENT_LIBRARY=true
NEXT_PUBLIC_ENABLE_TERRAFORM_GENERATION=true

#============================================
# Analytics & Monitoring
#============================================
# Sentry DSN for error tracking
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Google Analytics ID
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Log level (error, warn, info, debug)
LOG_LEVEL=warn

#============================================
# Email Configuration
#============================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=REPLACE_WITH_SENDGRID_API_KEY
SMTP_FROM=noreply@cortex.yourdomain.com

#============================================
# SSL/TLS Configuration
#============================================
# Enable secure cookies
SECURE_COOKIES=true

# Force HTTPS
FORCE_HTTPS=true

#============================================
# Rate Limiting (Recommended)
#============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

#============================================
# Health Check Configuration
#============================================
HEALTH_CHECK_PATH=/api/health
READINESS_CHECK_PATH=/api/readyz
LIVENESS_CHECK_PATH=/api/healthz

#============================================
# Legacy Firebase Mode (Alternative)
#============================================
# Uncomment these if deploying with Firebase instead of self-hosted
# DEPLOYMENT_MODE=firebase
# NEXT_PUBLIC_DEPLOYMENT_MODE=firebase
# NEXT_PUBLIC_FIREBASE_API_KEY=${FIREBASE_API_KEY}
# NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=cortex-dc-portal.firebaseapp.com
# NEXT_PUBLIC_FIREBASE_PROJECT_ID=cortex-dc-portal
# NEXT_PUBLIC_FIREBASE_APP_ID=${FIREBASE_APP_ID}
# NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=${FIREBASE_MEASUREMENT_ID}
